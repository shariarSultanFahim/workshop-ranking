// Copy API From this link and Replace the API
//  https://sheetdb.io/api/v1/xzodpywpk6f9y
const api = [
  {
    "roll": "2301039",
    "name": "Ahamad Ferdos Sami",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "1",
    "totalPoint": "10",
    "image": ""
  },
  {
    "roll": "2301025",
    "name": "Ahsanul Emon Shezan",
    "contestCount": "2",
    "solveCount": "20",
    "solveTime": "1392",
    "totalAttendance": "3",
    "totalPoint": "150",
    "image": ""
  },
  {
    "roll": "2301041",
    "name": "Aiman Noushin Tithy",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "1",
    "totalPoint": "10",
    "image": ""
  },
  {
    "roll": "2301015",
    "name": "Anamul Haque",
    "contestCount": "4",
    "solveCount": "37",
    "solveTime": "2316",
    "totalAttendance": "3",
    "totalPoint": "255",
    "image": ""
  },
  {
    "roll": "2301056",
    "name": "Anas Mohammad",
    "contestCount": "9",
    "solveCount": "32",
    "solveTime": "3356",
    "totalAttendance": "8",
    "totalPoint": "330",
    "image": ""
  },
  {
    "roll": "2201058",
    "name": "Anik Roy",
    "contestCount": "8",
    "solveCount": "51",
    "solveTime": "31",
    "totalAttendance": "8",
    "totalPoint": "415",
    "image": "https://lh3.googleusercontent.com/u/3/drive-viewer/AKGpihZ3yY83uEMjnc9G4fdAzOyuNq0ae2Yb1xtELgjgjoy-nzak7yK8fG3p3Jv7GKCqcJ4AwDWqbbVN-GGy6kdUIarSxk5jtg=w1366-h599"
  },
  {
    "roll": "2301054",
    "name": "Ariful Islam Pavel",
    "contestCount": "4",
    "solveCount": "16",
    "solveTime": "1078",
    "totalAttendance": "11",
    "totalPoint": "230",
    "image": ""
  },
  {
    "roll": "2301068",
    "name": "Asma Chowdhury",
    "contestCount": "7",
    "solveCount": "18",
    "solveTime": "2440",
    "totalAttendance": "13",
    "totalPoint": "290",
    "image": ""
  },
  {
    "roll": "2301063",
    "name": "Aysha Khanom",
    "contestCount": "8",
    "solveCount": "45",
    "solveTime": "2252",
    "totalAttendance": "13",
    "totalPoint": "435",
    "image": "https://lh3.googleusercontent.com/u/3/drive-viewer/AKGpihbrc8vsgMyLX-AOdhh0TUWUAVs7RNi-LMm2Be8Rir8syyUMZJ0z8fEUtgEI0pk6OtcJ8y_yMkIt758tiVmqmvNXMAa3=w1366-h599"
  },
  {
    "roll": "351",
    "name": "Abdullah Al Mamun",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "1",
    "totalPoint": "10",
    "image": ""
  },
  {
    "roll": "2201084",
    "name": "Abdullah Hill Kafi",
    "contestCount": "3",
    "solveCount": "7",
    "solveTime": "557",
    "totalAttendance": "8",
    "totalPoint": "145",
    "image": ""
  },
  {
    "roll": "2301079",
    "name": "Hasib",
    "contestCount": "8",
    "solveCount": "17",
    "solveTime": "889",
    "totalAttendance": "12",
    "totalPoint": "285",
    "image": ""
  },
  {
    "roll": "2301072",
    "name": "Hubert Dhrubo Gomes",
    "contestCount": "9",
    "solveCount": "29",
    "solveTime": "2698",
    "totalAttendance": "11",
    "totalPoint": "345",
    "image": ""
  },
  {
    "roll": "2201056",
    "name": "Jenat",
    "contestCount": "6",
    "solveCount": "31",
    "solveTime": "2425",
    "totalAttendance": "6",
    "totalPoint": "275",
    "image": ""
  },
  {
    "roll": "2301059",
    "name": "Jion Ibrahim",
    "contestCount": "5",
    "solveCount": "14",
    "solveTime": "1257",
    "totalAttendance": "5",
    "totalPoint": "170",
    "image": ""
  },
  {
    "roll": "2301019",
    "name": "Lamia Hossain Mim",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "0",
    "totalPoint": "0",
    "image": ""
  },
  {
    "roll": "2108006",
    "name": "Muktadur Rahman Shakib",
    "contestCount": "8",
    "solveCount": "61",
    "solveTime": "3916",
    "totalAttendance": "9",
    "totalPoint": "475",
    "image": "https://lh3.googleusercontent.com/u/0/drive-viewer/AKGpihY3mDFEBY43hNtDSPtW8df1OsyQXarw9VeNFgMDA2HEoaV63LrvbhybOIEpdkC1g8U1DkHpL8yRp5GDZi1Cew6DFVJt4Q=w1366-h599"
  },
  {
    "roll": "2301060",
    "name": "Madhobi Nag",
    "contestCount": "6",
    "solveCount": "13",
    "solveTime": "991",
    "totalAttendance": "11",
    "totalPoint": "235",
    "image": ""
  },
  {
    "roll": "2301017",
    "name": "Mahmudul Hasan Sakib",
    "contestCount": "4",
    "solveCount": "12",
    "solveTime": "838",
    "totalAttendance": "5",
    "totalPoint": "150",
    "image": "https://lh3.googleusercontent.com/u/3/drive-viewer/AKGpihYbBPa1x7K0iFzkW6hhgjmD4RTiqOE8qe5NBIFxfirVBMIGtWy9a_payzkBMEd7YJo_ZvQyZ_dYXEed_4C9lJ20G5ALrQ=w1366-h599"
  },
  {
    "roll": "2301008",
    "name": "Maimoona",
    "contestCount": "8",
    "solveCount": "56",
    "solveTime": "3715",
    "totalAttendance": "9",
    "totalPoint": "450",
    "image": "https://lh3.googleusercontent.com/u/3/drive-viewer/AKGpihazAV0f3UWOyUqZBPsReX29tlTuI8-2_CFpBmVPNdBt1uEgw0JGwuMS3CSyATIL7Hn0rQXSVfRUsGT5p6DLRdhrFuhqOQ=w1960-h3486"
  },
  {
    "roll": "2301037",
    "name": "Md Arafat hossan",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "2",
    "totalPoint": "20",
    "image": ""
  },
  {
    "roll": "2301092",
    "name": "MD Khaled Hasan",
    "contestCount": "9",
    "solveCount": "31",
    "solveTime": "2048",
    "totalAttendance": "12",
    "totalPoint": "365",
    "image": ""
  },
  {
    "roll": "2301090",
    "name": "Md Naeem Sarker",
    "contestCount": "9",
    "solveCount": "73",
    "solveTime": "3911",
    "totalAttendance": "14",
    "totalPoint": "595",
    "image": "https://lh3.googleusercontent.com/u/3/drive-viewer/AKGpihbZbdSB-hebN0JKp2Afvm6rv-FIRXOQV29JyBNEvraMtUztKadkgClhOCsSIz1x0Z1sO7zRBEy0AIQWVzKnZLtd43BhfA=w1366-h598"
  },
  {
    "roll": "2301098",
    "name": "Md Pranto Hossain Shakib",
    "contestCount": "1",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "2",
    "totalPoint": "30",
    "image": ""
  },
  {
    "roll": "2301114",
    "name": "Md Rakib Hasan Al Shafi",
    "contestCount": "2",
    "solveCount": "6",
    "solveTime": "612",
    "totalAttendance": "8",
    "totalPoint": "130",
    "image": ""
  },
  {
    "roll": "2301108",
    "name": "Md Robiul Islam",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "2",
    "totalPoint": "20",
    "image": ""
  },
  {
    "roll": "2301061",
    "name": "Md Toukir Uz Zaman Nirob",
    "contestCount": "9",
    "solveCount": "26",
    "solveTime": "1125",
    "totalAttendance": "11",
    "totalPoint": "330",
    "image": ""
  },
  {
    "roll": "2301051",
    "name": "Md Yeasin Ali",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "0",
    "totalPoint": "0",
    "image": ""
  },
  {
    "roll": "2301109",
    "name": "MD. Abir Hossain",
    "contestCount": "1",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "2",
    "totalPoint": "30",
    "image": ""
  },
  {
    "roll": "2301047",
    "name": "Md. Parvej Hasan",
    "contestCount": "5",
    "solveCount": "15",
    "solveTime": "1866",
    "totalAttendance": "11",
    "totalPoint": "235",
    "image": ""
  },
  {
    "roll": "2301035",
    "name": "Md. Rifat dewan",
    "contestCount": "1",
    "solveCount": "3",
    "solveTime": "291",
    "totalAttendance": "3",
    "totalPoint": "55",
    "image": ""
  },
  {
    "roll": "2201083",
    "name": "Md. Sajeeb Sarker",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "2",
    "totalPoint": "20",
    "image": ""
  },
  {
    "roll": "2301065",
    "name": "Md. Sheikh Fardin Shifad",
    "contestCount": "6",
    "solveCount": "6",
    "solveTime": "311",
    "totalAttendance": "11",
    "totalPoint": "200",
    "image": ""
  },
  {
    "roll": "2301011",
    "name": "Md. Thasin Ahammed",
    "contestCount": "1",
    "solveCount": "2",
    "solveTime": "167",
    "totalAttendance": "3",
    "totalPoint": "50",
    "image": ""
  },
  {
    "roll": "2301009",
    "name": "Md.Tawhidur Rahman Tonmoy",
    "contestCount": "7",
    "solveCount": "22",
    "solveTime": "1758",
    "totalAttendance": "11",
    "totalPoint": "290",
    "image": ""
  },
  {
    "roll": "2301033",
    "name": "Md. Mesbha Uddin",
    "contestCount": "2",
    "solveCount": "3",
    "solveTime": "197",
    "totalAttendance": "8",
    "totalPoint": "115",
    "image": ""
  },
  {
    "roll": "2301066",
    "name": "Md. Rakibul Islam",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "1",
    "totalPoint": "10",
    "image": ""
  },
  {
    "roll": "2301096",
    "name": "Meherun Nessa Mim",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "11",
    "totalPoint": "110",
    "image": ""
  },
  {
    "roll": "2201064",
    "name": "Mithila",
    "contestCount": "7",
    "solveCount": "46",
    "solveTime": "3493",
    "totalAttendance": "7",
    "totalPoint": "370",
    "image": "https://lh3.googleusercontent.com/u/3/drive-viewer/AKGpihY6CrLvwYup9luenKmlBEqMXSSLtgtyFZL0bxDOzT2F7dkB71RfpXm1-dY2C8-ady37SkfEmwuVPyPJh78m9OVXrsYcRA=w1366-h599"
  },
  {
    "roll": "2201017",
    "name": "Mohammad Al- Nahian",
    "contestCount": "1",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "5",
    "totalPoint": "60",
    "image": ""
  },
  {
    "roll": "2301064",
    "name": "Mukti Rahman Prova",
    "contestCount": "5",
    "solveCount": "13",
    "solveTime": "1303",
    "totalAttendance": "8",
    "totalPoint": "195",
    "image": ""
  },
  {
    "roll": "2301048",
    "name": "Naeem",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "0",
    "totalPoint": "0",
    "image": ""
  },
  {
    "roll": "2301045",
    "name": "Naibur Rahman Nafis",
    "contestCount": "2",
    "solveCount": "7",
    "solveTime": "865",
    "totalAttendance": "5",
    "totalPoint": "105",
    "image": ""
  },
  {
    "roll": "2301069",
    "name": "Najifa Bristi",
    "contestCount": "6",
    "solveCount": "8",
    "solveTime": "609",
    "totalAttendance": "11",
    "totalPoint": "210",
    "image": ""
  },
  {
    "roll": "2301031",
    "name": "Nishat Rumman Prity",
    "contestCount": "5",
    "solveCount": "9",
    "solveTime": "891",
    "totalAttendance": "12",
    "totalPoint": "215",
    "image": ""
  },
  {
    "roll": "2301020",
    "name": "Nusrat Azhari Torey",
    "contestCount": "8",
    "solveCount": "15",
    "solveTime": "802",
    "totalAttendance": "12",
    "totalPoint": "275",
    "image": ""
  },
  {
    "roll": "2301104",
    "name": "Prapto Kumar Sarker",
    "contestCount": "7",
    "solveCount": "38",
    "solveTime": "3078",
    "totalAttendance": "11",
    "totalPoint": "370",
    "image": ""
  },
  {
    "roll": "2301101",
    "name": "Proyon das nejhom",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "5",
    "totalPoint": "50",
    "image": ""
  },
  {
    "roll": "2301042",
    "name": "Rabita Islam",
    "contestCount": "6",
    "solveCount": "18",
    "solveTime": "1869",
    "totalAttendance": "9",
    "totalPoint": "240",
    "image": ""
  },
  {
    "roll": "2201079",
    "name": "Rajmin Siraj",
    "contestCount": "8",
    "solveCount": "48",
    "solveTime": "2444",
    "totalAttendance": "11",
    "totalPoint": "430",
    "image": "https://lh3.googleusercontent.com/u/3/drive-viewer/AKGpihalapUyHWRtEYkoiE-XcAgPPSJ1OANLTSn-EAdlYfUONcGez9MhMmkCSNKXo1l-9_2XPiC_ydyPOqm3M4mqOX5yvMvnNA=w1366-h599"
  },
  {
    "roll": "2001003",
    "name": "rakiul hasan",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "0",
    "totalPoint": "0",
    "image": ""
  },
  {
    "roll": "2301087",
    "name": "Ratul Biswas",
    "contestCount": "7",
    "solveCount": "31",
    "solveTime": "2002",
    "totalAttendance": "10",
    "totalPoint": "325",
    "image": ""
  },
  {
    "roll": "2301036",
    "name": "Rohit sen",
    "contestCount": "8",
    "solveCount": "26",
    "solveTime": "1722",
    "totalAttendance": "13",
    "totalPoint": "340",
    "image": ""
  },
  {
    "roll": "2301112",
    "name": "Sadia Islam Jannat",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "2",
    "totalPoint": "20",
    "image": ""
  },
  {
    "roll": "2301049",
    "name": "Sajib Hossain Saad",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "5",
    "totalPoint": "50",
    "image": ""
  },
  {
    "roll": "2201054",
    "name": "Sazid Ahmed",
    "contestCount": "6",
    "solveCount": "27",
    "solveTime": "1852",
    "totalAttendance": "5",
    "totalPoint": "245",
    "image": ""
  },
  {
    "roll": "2201032",
    "name": "Sazid Al Rafi",
    "contestCount": "2",
    "solveCount": "12",
    "solveTime": "1445",
    "totalAttendance": "0",
    "totalPoint": "80",
    "image": ""
  },
  {
    "roll": "2301013",
    "name": "Sumyea Rahman",
    "contestCount": "5",
    "solveCount": "12",
    "solveTime": "848",
    "totalAttendance": "11",
    "totalPoint": "220",
    "image": ""
  },
  {
    "roll": "2301053",
    "name": "Tajmin",
    "contestCount": "9",
    "solveCount": "33",
    "solveTime": "1570",
    "totalAttendance": "13",
    "totalPoint": "385",
    "image": ""
  },
  {
    "roll": "302492",
    "name": "Umme Salma",
    "contestCount": "8",
    "solveCount": "9",
    "solveTime": "899",
    "totalAttendance": "11",
    "totalPoint": "235",
    "image": ""
  },
  {
    "roll": "2301001",
    "name": "Yasin Ahmad Abdullah",
    "contestCount": "4",
    "solveCount": "9",
    "solveTime": "1256",
    "totalAttendance": "4",
    "totalPoint": "125",
    "image": ""
  },
  {
    "roll": "2301067",
    "name": "Yeakub Hossain Arman",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "0",
    "totalPoint": "0",
    "image": ""
  },
  {
    "roll": "2201102",
    "name": "Asif Ahmed",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "3",
    "totalPoint": "30",
    "image": ""
  },
  {
    "roll": "",
    "name": "Dewan Sabit Hasan",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "0",
    "totalPoint": "0",
    "image": ""
  },
  {
    "roll": "",
    "name": "Rakibul Islam",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "0",
    "totalPoint": "0",
    "image": ""
  }
]


const studentApi =  (api) => {
  document.getElementById("loading").classList.remove("hidden");
  document.getElementById("loading").classList.add("flex");
  document.getElementById('rank-table').classList.add('hidden');
  document.getElementById('top-three').classList.add('hidden');

  const studentRanking = api;
  showStudentRanking(studentRanking);
};

const showStudentRanking = (students) => {
  students.sort((a, b) => {
    if (a.totalPoint !== b.totalPoint) {
      return b.totalPoint - a.totalPoint; // Sort by ranking
    } else {
      return a.solveTime - b.solveTime; // If ranking is the same, sort by total time
    }
  });

  let rank = 1;
  for(let i=0 ; i<students.length ; i++) {
    let student = students[i];

    const studentTable = document.getElementById("student-rank");
    const newStudentData = document.createElement("tr");
    newStudentData.classList ="text-center bg-transparent hover:bg-stone-200  hover:bg-opacity-50 shadow-lg";

    
    const topThreeConainer = document.getElementById('top-three');
    const topRank = document.createElement('div');

    if (rank == 2) {
      rank++;
      student = students[i-1];
      topRank.classList = 'w-[90%] mx-auto md:w-auto md:mx-0 flex flex-col items-center justify-center  mb-10 rounded-lg shadow-md shadow-black'
      topRank.innerHTML = `
      <div class="p-8"> 
      <div class="avatar pl-8 py-6">
            <div class=" shadow-lg shadow-[#7000ff] w-24 rounded-full">
              <img class="" src="${student.image}" alt="">
            </div>
          </div>

          <h1 class="py-4 text-xl font-medium text-center w-40">${student.name}</h1>
          </div>

          <div class="flex flex-col justify-between items-center gap-4 py-4  bg-purple-700 rounded-lg w-full h-full">
          <h1 class="text-5xl font-bold text-white">1</h1>
          <h1 class="text-lg text-white">Score : ${student.totalPoint}</h1>
          </div>
      `;
      topThreeConainer.append(topRank);
    } else if (rank == 1) {
    rank++;
    student = students[i+1];
    topRank.classList = 'w-[90%] mx-auto md:w-auto md:mx-0 flex flex-col items-center justify-center  mt-10  rounded-lg shadow-md shadow-black'
    topRank.innerHTML = `
      <div class="p-8">
      <div class="avatar pl-8 py-6">
            <div class=" shadow-lg shadow-[#7000ff] w-24 rounded-full">
              <img class="" src="${student.image}" alt="">
            </div>
          </div>

          <h1 class="py-4 text-xl font-medium text-center w-40">${student.name}</h1>
          </div>

          <div class="flex flex-col justify-between items-center gap-4 py-4  bg-purple-700 rounded-lg w-full h-full">
          <h1 class="text-5xl font-bold text-white">2</h1>
          <h1 class="text-lg text-white">Score : ${student.totalPoint}</h1>
          </div>
      `;
    topThreeConainer.append(topRank);
    } else if (rank == 3) {
    rank++;
    topRank.classList = 'w-[90%] mx-auto md:w-auto md:mx-0 flex flex-col items-center justify-center  mt-10  rounded-lg shadow-md shadow-black md:w-auto'
    topRank.innerHTML = `
      <div class="p-8">
      <div class="avatar pl-8 py-6">
            <div class=" shadow-lg shadow-[#7000ff] w-24 rounded-full">
              <img class="" src="${student.image}" alt="">
            </div>
          </div>

          <h1 class="py-4 text-xl font-medium text-center w-40">${student.name}</h1>
          </div>

          <div class="flex flex-col justify-between items-center gap-4 py-4  bg-purple-700 rounded-lg w-full h-full">
          <h1 class="text-5xl font-bold text-white">3</h1>
          <h1 class="text-lg text-white">Score : ${student.totalPoint}</h1>
          </div>
      `;
    topThreeConainer.append(topRank);
    }else{
      newStudentData.innerHTML = `
        <td>${rank++}</td>
        <td>${student.totalPoint}</td>
        <td>${student.name}</td>
        <td class="hidden md:table-cell">${student.roll}</td>    
        <td class="hidden md:table-cell">${student.totalAttendance}</td>
        <td class="hidden md:table-cell">${student.contestCount}</td>
        <td class="hidden md:table-cell">${student.solveCount}</td>
        <td class="hidden md:table-cell">${student.solveTime}</td>
        `;
    }
      
      document.getElementById("loading").classList.add("hidden");
      document.getElementById("loading").classList.remove("flex");
      document.getElementById('rank-table').classList.remove('hidden');
      document.getElementById('top-three').classList.remove('hidden');
      studentTable.append(newStudentData);
    
  };
};
studentApi(api);
