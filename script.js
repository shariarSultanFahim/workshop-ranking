
// https://sheetdb.io/api/v1/xzodpywpk6f9y
const api = [
  {
    "roll": "2301039",
    "name": "Ahamad Ferdos Sami",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "1",
    "totalPoint": "10",
    "image": ""
  },
  {
    "roll": "2301025",
    "name": "Ahsanul Emon Shezan",
    "contestCount": "5",
    "solveCount": "40",
    "solveTime": "2666",
    "totalAttendance": "4",
    "totalPoint": "290",
    "image": ""
  },
  {
    "roll": "2301041",
    "name": "Aiman Noushin Tithy",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "1",
    "totalPoint": "10",
    "image": ""
  },
  {
    "roll": "2301015",
    "name": "Anamul Haque",
    "contestCount": "4",
    "solveCount": "37",
    "solveTime": "2316",
    "totalAttendance": "3",
    "totalPoint": "255",
    "image": ""
  },
  {
    "roll": "2301056",
    "name": "Anas Mohammad",
    "contestCount": "10",
    "solveCount": "34",
    "solveTime": "3424",
    "totalAttendance": "8",
    "totalPoint": "350",
    "image": ""
  },
  {
    "roll": "2201058",
    "name": "Anik Roy",
    "contestCount": "9",
    "solveCount": "53",
    "solveTime": "3264",
    "totalAttendance": "8",
    "totalPoint": "435",
    "image": ""
  },
  {
    "roll": "2301054",
    "name": "Ariful Islam Pavel",
    "contestCount": "5",
    "solveCount": "18",
    "solveTime": "1135",
    "totalAttendance": "11",
    "totalPoint": "250",
    "image": ""
  },
  {
    "roll": "2301068",
    "name": "Asma Chowdhury",
    "contestCount": "8",
    "solveCount": "20",
    "solveTime": "2496",
    "totalAttendance": "15",
    "totalPoint": "330",
    "image": ""
  },
  {
    "roll": "2301063",
    "name": "Aysha Khanom",
    "contestCount": "11",
    "solveCount": "63",
    "solveTime": "3555",
    "totalAttendance": "15",
    "totalPoint": "575",
    "image": "https://lh3.googleusercontent.com/u/0/drive-viewer/AKGpihbfsvs2zEgH5jyGnwFy8oQH-gTiPEc1gB6MKyOevFxnTbrqaLGbJmMJjztFvBFuLCOBspFKHox9aAeXwmm0KZtv6cGQKS6awg=w1960-h1770-rw-v1"
  },
  {
    "roll": "351",
    "name": "Abdullah Al Mamun",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "1",
    "totalPoint": "10",
    "image": ""
  },
  {
    "roll": "2201084",
    "name": "Abdullah Hill Kafi",
    "contestCount": "4",
    "solveCount": "9",
    "solveTime": "621",
    "totalAttendance": "10",
    "totalPoint": "185",
    "image": ""
  },
  {
    "roll": "2301079",
    "name": "Hasib",
    "contestCount": "11",
    "solveCount": "27",
    "solveTime": "1763",
    "totalAttendance": "14",
    "totalPoint": "385",
    "image": ""
  },
  {
    "roll": "2301072",
    "name": "Hubert Dhrubo Gomes",
    "contestCount": "12",
    "solveCount": "39",
    "solveTime": "3121",
    "totalAttendance": "14",
    "totalPoint": "455",
    "image": ""
  },
  {
    "roll": "2201056",
    "name": "Jenat",
    "contestCount": "9",
    "solveCount": "36",
    "solveTime": "2667",
    "totalAttendance": "7",
    "totalPoint": "340",
    "image": ""
  },
  {
    "roll": "2301059",
    "name": "Jion Ibrahim",
    "contestCount": "5",
    "solveCount": "14",
    "solveTime": "1257",
    "totalAttendance": "5",
    "totalPoint": "170",
    "image": ""
  },
  {
    "roll": "2301019",
    "name": "Lamia Hossain Mim",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "0",
    "totalPoint": "0",
    "image": ""
  },
  {
    "roll": "2108006",
    "name": "Muktadur Rahman Shakib",
    "contestCount": "11",
    "solveCount": "83",
    "solveTime": "5064",
    "totalAttendance": "9",
    "totalPoint": "615",
    "image": "https://lh3.googleusercontent.com/u/0/drive-viewer/AKGpihapePI02XoyGtIhODc4RjHWUXK7BbCKjAf7DIwnFX-aNrCpK4C20bZ6v8HGhI9dKl9ldLGDpixUVgAyJTy7sWDKAWHyNOtoxM0=w1960-h1770-rw-v1"
  },
  {
    "roll": "2301060",
    "name": "Madhobi Nag",
    "contestCount": "9",
    "solveCount": "25",
    "solveTime": "1482",
    "totalAttendance": "14",
    "totalPoint": "355",
    "image": ""
  },
  {
    "roll": "2301017",
    "name": "Mahmudul Hasan Sakib",
    "contestCount": "5",
    "solveCount": "13",
    "solveTime": "858",
    "totalAttendance": "5",
    "totalPoint": "165",
    "image": "https://lh3.googleusercontent.com/u/4/drive-viewer/AKGpihb_CROJ9edFFXmCFbf_Elvc7yLWqah1saM_QmS6Lpp2_6iPdw_dDGKKDASTZqjMn9B6wmC__UPWbbLMDspDEfTPrJT7jbKFUA=w1960-h1770"
  },
  {
    "roll": "2301008",
    "name": "Maimoona",
    "contestCount": "9",
    "solveCount": "62",
    "solveTime": "4207",
    "totalAttendance": "8",
    "totalPoint": "480",
    "image": ""
  },
  {
    "roll": "2301037",
    "name": "Md Arafat hossan",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "2",
    "totalPoint": "20",
    "image": ""
  },
  {
    "roll": "2301092",
    "name": "MD Khaled Hasan",
    "contestCount": "12",
    "solveCount": "44",
    "solveTime": "2954",
    "totalAttendance": "13",
    "totalPoint": "470",
    "image": ""
  },
  {
    "roll": "2301090",
    "name": "Md Naeem Sarker",
    "contestCount": "12",
    "solveCount": "92",
    "solveTime": "4675",
    "totalAttendance": "16",
    "totalPoint": "740",
    "image": "https://lh3.googleusercontent.com/u/0/drive-viewer/AKGpihZzDbF3dYhXtPCA7YXhKc8x_D42uVSq6uThEQjHotiCBWYtJMq0b4QOoq2COp2xLH35bdd7FLDyidSbndTMu29TfWCxebD4K_Y=w1366-h599"
  },
  {
    "roll": "2301098",
    "name": "Md Pranto Hossain Shakib",
    "contestCount": "1",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "2",
    "totalPoint": "30",
    "image": ""
  },
  {
    "roll": "2301114",
    "name": "Md Rakib Hasan Al Shafi",
    "contestCount": "2",
    "solveCount": "6",
    "solveTime": "612",
    "totalAttendance": "8",
    "totalPoint": "130",
    "image": ""
  },
  {
    "roll": "2301108",
    "name": "Md Robiul Islam",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "2",
    "totalPoint": "20",
    "image": ""
  },
  {
    "roll": "2301061",
    "name": "Md Toukir Uz Zaman Nirob",
    "contestCount": "12",
    "solveCount": "43",
    "solveTime": "1833",
    "totalAttendance": "13",
    "totalPoint": "465",
    "image": ""
  },
  {
    "roll": "2301051",
    "name": "Md Yeasin Ali",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "0",
    "totalPoint": "0",
    "image": ""
  },
  {
    "roll": "2301109",
    "name": "MD. Abir Hossain",
    "contestCount": "1",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "2",
    "totalPoint": "30",
    "image": ""
  },
  {
    "roll": "2301047",
    "name": "Md. Parvej Hasan",
    "contestCount": "6",
    "solveCount": "19",
    "solveTime": "2194",
    "totalAttendance": "13",
    "totalPoint": "285",
    "image": ""
  },
  {
    "roll": "2301035",
    "name": "Md. Rifat dewan",
    "contestCount": "1",
    "solveCount": "3",
    "solveTime": "291",
    "totalAttendance": "3",
    "totalPoint": "55",
    "image": ""
  },
  {
    "roll": "2201083",
    "name": "Md. Sajeeb Sarker",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "2",
    "totalPoint": "20",
    "image": ""
  },
  {
    "roll": "2301065",
    "name": "Md. Sheikh Fardin Shifad",
    "contestCount": "7",
    "solveCount": "8",
    "solveTime": "458",
    "totalAttendance": "10",
    "totalPoint": "210",
    "image": ""
  },
  {
    "roll": "2301011",
    "name": "Md. Thasin Ahammed",
    "contestCount": "1",
    "solveCount": "2",
    "solveTime": "167",
    "totalAttendance": "3",
    "totalPoint": "50",
    "image": ""
  },
  {
    "roll": "2301009",
    "name": "Md.Tawhidur Rahman Tonmoy",
    "contestCount": "8",
    "solveCount": "24",
    "solveTime": "1776",
    "totalAttendance": "10",
    "totalPoint": "300",
    "image": ""
  },
  {
    "roll": "2301033",
    "name": "Md. Mesbha Uddin",
    "contestCount": "2",
    "solveCount": "3",
    "solveTime": "197",
    "totalAttendance": "8",
    "totalPoint": "115",
    "image": ""
  },
  {
    "roll": "2301066",
    "name": "Md. Rakibul Islam",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "1",
    "totalPoint": "10",
    "image": ""
  },
  {
    "roll": "2301096",
    "name": "Meherun Nessa Mim",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "12",
    "totalPoint": "120",
    "image": ""
  },
  {
    "roll": "2201064",
    "name": "Mithila",
    "contestCount": "8",
    "solveCount": "49",
    "solveTime": "3603",
    "totalAttendance": "7",
    "totalPoint": "395",
    "image": "https://lh3.googleusercontent.com/u/3/drive-viewer/AKGpihY6CrLvwYup9luenKmlBEqMXSSLtgtyFZL0bxDOzT2F7dkB71RfpXm1-dY2C8-ady37SkfEmwuVPyPJh78m9OVXrsYcRA=w1366-h599"
  },
  {
    "roll": "2201017",
    "name": "Mohammad Al- Nahian",
    "contestCount": "1",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "4",
    "totalPoint": "50",
    "image": ""
  },
  {
    "roll": "2301064",
    "name": "Mukti Rahman Prova",
    "contestCount": "8",
    "solveCount": "22",
    "solveTime": "1916",
    "totalAttendance": "10",
    "totalPoint": "290",
    "image": ""
  },
  {
    "roll": "2301048",
    "name": "Naeem",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "0",
    "totalPoint": "0",
    "image": ""
  },
  {
    "roll": "2301045",
    "name": "Naibur Rahman Nafis",
    "contestCount": "2",
    "solveCount": "7",
    "solveTime": "865",
    "totalAttendance": "5",
    "totalPoint": "105",
    "image": ""
  },
  {
    "roll": "2301069",
    "name": "Najifa Bristi",
    "contestCount": "9",
    "solveCount": "15",
    "solveTime": "1112",
    "totalAttendance": "13",
    "totalPoint": "295",
    "image": ""
  },
  {
    "roll": "2301031",
    "name": "Nishat Rumman Prity",
    "contestCount": "6",
    "solveCount": "11",
    "solveTime": "916",
    "totalAttendance": "12",
    "totalPoint": "235",
    "image": ""
  },
  {
    "roll": "2301020",
    "name": "Nusrat Azhari Torey",
    "contestCount": "10",
    "solveCount": "21",
    "solveTime": "1003",
    "totalAttendance": "14",
    "totalPoint": "345",
    "image": ""
  },
  {
    "roll": "2301104",
    "name": "Prapto Kumar Sarker",
    "contestCount": "10",
    "solveCount": "51",
    "solveTime": "3885",
    "totalAttendance": "12",
    "totalPoint": "475",
    "image": ""
  },
  {
    "roll": "2301101",
    "name": "Proyon das nejhom",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "5",
    "totalPoint": "50",
    "image": ""
  },
  {
    "roll": "2301042",
    "name": "Rabita Islam",
    "contestCount": "6",
    "solveCount": "18",
    "solveTime": "1869",
    "totalAttendance": "9",
    "totalPoint": "240",
    "image": ""
  },
  {
    "roll": "2201079",
    "name": "Rajmin Siraj",
    "contestCount": "11",
    "solveCount": "64",
    "solveTime": "3146",
    "totalAttendance": "13",
    "totalPoint": "560",
    "image": "https://lh3.googleusercontent.com/u/0/drive-viewer/AKGpihbyDlbHYBiEz9uImi3EGFjdtbKBXun8G0tFn8reEkXTsWEv-4uUiR6UD06MD6TxxjGYFOG7URfyHrXnZp8DDnGnpIceKaCkFl0=w1152-h1042-rw-v1"
  },
  {
    "roll": "2001003",
    "name": "rakiul hasan",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "0",
    "totalPoint": "0",
    "image": ""
  },
  {
    "roll": "2301087",
    "name": "Ratul Biswas",
    "contestCount": "10",
    "solveCount": "45",
    "solveTime": "3032",
    "totalAttendance": "13",
    "totalPoint": "455",
    "image": ""
  },
  {
    "roll": "2301036",
    "name": "Rohit sen",
    "contestCount": "9",
    "solveCount": "29",
    "solveTime": "1883",
    "totalAttendance": "12",
    "totalPoint": "355",
    "image": ""
  },
  {
    "roll": "2301112",
    "name": "Sadia Islam Jannat",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "2",
    "totalPoint": "20",
    "image": ""
  },
  {
    "roll": "2301049",
    "name": "Sajib Hossain Saad",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "5",
    "totalPoint": "50",
    "image": ""
  },
  {
    "roll": "2201054",
    "name": "Sazid Ahmed",
    "contestCount": "7",
    "solveCount": "29",
    "solveTime": "1934",
    "totalAttendance": "8",
    "totalPoint": "295",
    "image": ""
  },
  {
    "roll": "2201032",
    "name": "Sazid Al Rafi",
    "contestCount": "2",
    "solveCount": "12",
    "solveTime": "1445",
    "totalAttendance": "0",
    "totalPoint": "80",
    "image": ""
  },
  {
    "roll": "2301013",
    "name": "Sumyea Rahman",
    "contestCount": "8",
    "solveCount": "27",
    "solveTime": "779",
    "totalAttendance": "13",
    "totalPoint": "345",
    "image": ""
  },
  {
    "roll": "2301053",
    "name": "Tajmin",
    "contestCount": "12",
    "solveCount": "47",
    "solveTime": "2047",
    "totalAttendance": "14",
    "totalPoint": "495",
    "image": ""
  },
  {
    "roll": "302492",
    "name": "Umme Salma",
    "contestCount": "8",
    "solveCount": "9",
    "solveTime": "899",
    "totalAttendance": "11",
    "totalPoint": "235",
    "image": ""
  },
  {
    "roll": "2301001",
    "name": "Yasin Ahmad Abdullah",
    "contestCount": "4",
    "solveCount": "9",
    "solveTime": "1256",
    "totalAttendance": "4",
    "totalPoint": "125",
    "image": ""
  },
  {
    "roll": "2301067",
    "name": "Yeakub Hossain Arman",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "0",
    "totalPoint": "0",
    "image": ""
  },
  {
    "roll": "2201102",
    "name": "Asif Ahmed",
    "contestCount": "1",
    "solveCount": "1",
    "solveTime": "79",
    "totalAttendance": "2",
    "totalPoint": "35",
    "image": ""
  },
  {
    "roll": "",
    "name": "Dewan Sabit Hasan",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "0",
    "totalPoint": "0",
    "image": ""
  },
  {
    "roll": "",
    "name": "Rakibul Islam",
    "contestCount": "0",
    "solveCount": "0",
    "solveTime": "0",
    "totalAttendance": "0",
    "totalPoint": "0",
    "image": ""
  },
  {
    "roll": "2301089",
    "name": "Pollobi Nag",
    "contestCount": "5",
    "solveCount": "12",
    "solveTime": "1065",
    "totalAttendance": "7",
    "totalPoint": "180",
    "image": ""
  },
  {
    "roll": "2201077",
    "name": "Abida Khatun Bushra",
    "contestCount": "3",
    "solveCount": "10",
    "solveTime": "713",
    "totalAttendance": "4",
    "totalPoint": "120",
    "image": ""
  }
]


const studentApi =  async(api) => {
  document.getElementById("loading").classList.remove("hidden");
  document.getElementById("loading").classList.add("flex");
  document.getElementById('rank-table').classList.add('hidden');
  document.getElementById('top-three').classList.add('hidden');

  const studentRanking = api;
  showStudentRanking(studentRanking);
};

const showStudentRanking = (students) => {
  students.sort((a, b) => {
    if (a.totalPoint !== b.totalPoint) {
      return b.totalPoint - a.totalPoint; // Sort by ranking
    } else {
      return a.solveTime - b.solveTime; // If ranking is the same, sort by total time
    }
  });

  let rank = 1;
  for(let i=0 ; i<students.length ; i++) {
    let student = students[i];

    const studentTable = document.getElementById("student-rank");
    const newStudentData = document.createElement("tr");
    newStudentData.classList ="text-center bg-transparent hover:bg-stone-200  hover:bg-opacity-50 shadow-lg";

    
    const topThreeConainer = document.getElementById('top-three');
    const topRank = document.createElement('div');

    if (rank == 2) {
      rank++;
      student = students[i-1];
      topRank.classList = ' h-full mx-auto md:w-auto md:mx-0 flex flex-col items-center justify-center  mb-10 rounded-lg shadow-md shadow-black'
      topRank.innerHTML = `
      <a href="#my_modal_1">
      <div class="p-8"> 
      <div class="avatar pl-8 py-6">
            <div class=" shadow-lg shadow-[#7000ff] w-24 rounded-full">
              <img class="" src="${student.image}" alt="">
            </div>
          </div>

          <h1 class="py-4 text-xl font-medium text-center w-40">${student.name}</h1>
          </div>

          <div class="flex flex-col justify-start items-center gap-4 py-4  bg-[#111827]  rounded-lg w-full ">
            <h1 class="text-5xl font-bold text-white">1</h1>
            <h1 class="text-lg text-white">Score : ${student.totalPoint}</h1>
          </div>
        </div>
          </a>
          
          <div class="modal" role="dialog" id="my_modal_1">
            <div class="modal-box">

              
              <p class="py-4">Class Roll: ${student.roll}</p>
              <p class="py-4">Contest Count: ${student.contestCount}</p>
              <p class="py-4">Solve Count: ${student.solveCount}</p>
              <p class="py-4">Time: ${student.solveTime}</p>

              <div class="modal-action">
              <a href="#" class="btn">Yay!</a>
              </div>
            </div>
          </div>
      `;
      topThreeConainer.append(topRank);
    } else if (rank == 1) {
    rank++;
    student = students[i+1];
    topRank.classList = ' h-full mx-auto md:w-auto md:mx-0 flex flex-col items-center justify-center  mt-10  rounded-lg shadow-md shadow-black'
    topRank.innerHTML = `
    <a href="#my_modal_2">
    <div class="p-8"> 
    <div class="avatar pl-8 py-6">
          <div class=" shadow-lg shadow-[#7000ff] w-24 rounded-full">
            <img class="" src="${student.image}" alt="">
          </div>
        </div>

        <h1 class="py-4 text-xl font-medium text-center w-40">${student.name}</h1>
        </div>

        <div class="flex flex-col justify-start items-center gap-4 py-4  bg-[#111827]  rounded-lg w-full ">
          <h1 class="text-5xl font-bold text-white">2</h1>
          <h1 class="text-lg text-white">Score : ${student.totalPoint}</h1>
        </div>
      </div>
        </a>
        
        <div class="modal" role="dialog" id="my_modal_2">
          <div class="modal-box">
          <p class="py-4">Class Roll: ${student.roll}</p>
          <p class="py-4">Contest Count: ${student.contestCount}</p>
          <p class="py-4">Solve Count: ${student.solveCount}</p>
          <p class="py-4">Time: ${student.solveTime}</p>
            <div class="modal-action">  
            <a href="#" class="btn">Yay!</a>
            </div>
          </div>
        </div>
    `;
    topThreeConainer.append(topRank);
    } else if (rank == 3) {        
    rank++;
    topRank.classList = ' h-full mx-auto md:w-auto md:mx-0 flex flex-col items-center justify-center  mt-10  rounded-lg shadow-md shadow-black'
    topRank.innerHTML = `
    <a href="#my_modal_3">
    <div class="p-8"> 
    <div class="avatar pl-8 py-6">
          <div class=" shadow-lg shadow-[#7000ff] w-24 rounded-full">
            <img class="" src="${student.image}" alt="">
          </div>
        </div>

        <h1 class="py-4 text-xl font-medium text-center w-40">${student.name}</h1>
        </div>

        <div class="flex flex-col justify-start items-center gap-4 py-4  bg-[#111827]  rounded-lg w-full">
          <h1 class="text-5xl font-bold text-white">3</h1>
          <h1 class="text-lg text-white">Score : ${student.totalPoint}</h1>
        </div>
      </div>
        </a>
        
        <div class="modal" role="dialog" id="my_modal_3">
          <div class="modal-box">
          <p class="py-4">Class Roll: ${student.roll}</p>
          <p class="py-4">Contest Count: ${student.contestCount}</p>
          <p class="py-4">Solve Count: ${student.solveCount}</p>
          <p class="py-4">Time: ${student.solveTime}</p>
            <div class="modal-action">
            <a href="#" class="btn">Yay!</a>
            </div>
          </div>
        </div>
    `;
    topThreeConainer.append(topRank);
    }else{
      newStudentData.innerHTML = `
        <td>${rank++}</td>
        <td>${student.totalPoint}</td>
        <td>${student.name}</td>
        <td class="hidden md:table-cell">${student.roll}</td>    
        <td class="hidden md:table-cell">${student.totalAttendance}</td>
        <td class="hidden md:table-cell">${student.contestCount}</td>
        <td class="hidden md:table-cell">${student.solveCount}</td>
        <td class="hidden md:table-cell">${student.solveTime}</td>
        `;
    }
      
      document.getElementById("loading").classList.add("hidden");
      document.getElementById("loading").classList.remove("flex");
      document.getElementById('rank-table').classList.remove('hidden');
      document.getElementById('top-three').classList.remove('hidden');
      studentTable.append(newStudentData);
    
  };
};
studentApi(api);
